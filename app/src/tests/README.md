# TML Villa 测试用例

## 测试环境要求

- Node.js 18+
- 已配置 VITE_API_BASE_URL 环境变量
- 后端 API 服务正常运行

## 运行测试

```bash
npm test
```

## 测试用例列表

### 1. 首页测试 (HomePage.test.tsx)

#### TC001: 页面加载
- **前置条件**: API 已配置并正常运行
- **步骤**:
  1. 访问首页
  2. 等待页面加载完成
- **预期结果**: 
  - 显示导航栏
  - 显示搜索框
  - 显示分类筛选
  - 显示房源列表

#### TC002: 分类筛选
- **前置条件**: 首页已加载
- **步骤**:
  1. 点击"海景"分类
  2. 观察房源列表
- **预期结果**: 
  - 只显示海景类型的房源
  - 其他类型房源被过滤

#### TC003: 房源卡片点击
- **前置条件**: 首页已加载
- **步骤**:
  1. 点击任意房源卡片
- **预期结果**: 
  - 跳转到房源详情页
  - URL 包含房源 ID

### 2. 房源详情页测试 (HomestayDetail.test.tsx)

#### TC004: 详情页加载
- **前置条件**: 从首页点击房源进入
- **步骤**:
  1. 等待详情页加载
- **预期结果**: 
  - 显示房源图片
  - 显示房源标题
  - 显示价格
  - 显示预订日历

#### TC005: 日期选择
- **前置条件**: 详情页已加载
- **步骤**:
  1. 选择入住日期
  2. 选择退房日期
- **预期结果**: 
  - 日期正确显示
  - 价格自动计算

#### TC006: 预订功能
- **前置条件**: 已选择日期
- **步骤**:
  1. 点击"预订"按钮
  2. 确认预订
- **预期结果**: 
  - 显示预订成功提示

### 3. 后台登录测试 (Login.test.tsx)

#### TC007: 正常登录
- **前置条件**: 访问 /#/admin
- **步骤**:
  1. 输入正确的用户名和密码
  2. 点击登录
- **预期结果**: 
  - 登录成功
  - 跳转到仪表板

#### TC008: 错误密码登录
- **前置条件**: 访问 /#/admin
- **步骤**:
  1. 输入错误的密码
  2. 点击登录
- **预期结果**: 
  - 显示错误提示
  - 停留在登录页

### 4. 后台仪表板测试 (Dashboard.test.tsx)

#### TC009: 数据统计显示
- **前置条件**: 已登录后台
- **步骤**:
  1. 查看仪表板
- **预期结果**: 
  - 显示今日订单数
  - 显示今日收入
  - 显示新增用户数
  - 显示待处理订单数

#### TC010: 收入趋势图表
- **前置条件**: 已登录后台
- **步骤**:
  1. 查看收入趋势图表
  2. 切换时间范围（7天/30天）
- **预期结果**: 
  - 图表正确显示
  - 切换后数据更新

### 5. 分类管理测试 (Categories.test.tsx)

#### TC011: 添加分类
- **前置条件**: 已登录后台，进入分类管理
- **步骤**:
  1. 点击"添加分类"
  2. 填写分类信息（中文/英文/泰文）
  3. 选择图标
  4. 点击保存
- **预期结果**: 
  - 分类添加到列表
  - 首页分类筛选同步更新

#### TC012: 编辑分类
- **前置条件**: 已有分类
- **步骤**:
  1. 点击分类的编辑按钮
  2. 修改分类名称
  3. 点击保存
- **预期结果**: 
  - 分类信息更新
  - 列表显示新名称

#### TC013: 删除分类
- **前置条件**: 已有分类
- **步骤**:
  1. 点击分类的删除按钮
  2. 确认删除
- **预期结果**: 
  - 分类从列表移除
  - 首页不再显示该分类

#### TC014: 启用/禁用分类
- **前置条件**: 已有分类
- **步骤**:
  1. 点击分类的状态按钮
- **预期结果**: 
  - 分类状态切换
  - 首页显示/隐藏该分类

### 6. 订单管理测试 (Orders.test.tsx)

#### TC015: 订单列表显示
- **前置条件**: 已登录后台，进入订单管理
- **步骤**:
  1. 查看订单列表
- **预期结果**: 
  - 显示所有订单
  - 显示订单号、用户、金额、状态

#### TC016: 订单筛选
- **前置条件**: 订单列表已显示
- **步骤**:
  1. 选择订单状态筛选
  2. 选择订单类型筛选
- **预期结果**: 
  - 列表按条件过滤

#### TC017: 确认订单
- **前置条件**: 有待确认订单
- **步骤**:
  1. 找到待确认订单
  2. 点击确认按钮
  3. 确认操作
- **预期结果**: 
  - 订单状态变为"已确认"

#### TC018: 取消订单
- **前置条件**: 有待确认订单
- **步骤**:
  1. 找到待确认订单
  2. 点击取消按钮
  3. 确认操作
- **预期结果**: 
  - 订单状态变为"已取消"

### 7. 商家管理测试 (Merchants.test.tsx)

#### TC019: 添加商家
- **前置条件**: 已登录后台，进入商家管理
- **步骤**:
  1. 点击"新增商家"
  2. 填写商家信息
  3. 点击保存
- **预期结果**: 
  - 商家添加到列表

#### TC020: 上架/下架商家
- **前置条件**: 已有商家
- **步骤**:
  1. 点击商家的上架/下架按钮
  2. 确认操作
- **预期结果**: 
  - 商家状态切换

### 8. 财务管理测试 (Finance.test.tsx)

#### TC021: 财务概览
- **前置条件**: 已登录后台，进入财务管理
- **步骤**:
  1. 查看财务概览
- **预期结果**: 
  - 显示账户余额
  - 显示总收入
  - 显示总支出
  - 显示总订单数

#### TC022: 交易记录
- **前置条件**: 已登录后台
- **步骤**:
  1. 进入交易记录页面
- **预期结果**: 
  - 显示所有交易记录
  - 显示交易类型、金额、描述

### 9. 响应式测试 (Responsive.test.tsx)

#### TC023: 移动端首页
- **前置条件**: 使用移动设备或模拟移动端
- **步骤**:
  1. 访问首页
- **预期结果**: 
  - 布局适配移动端
  - 内容正常显示
  - 无横向滚动

#### TC024: 移动端后台
- **前置条件**: 使用移动设备或模拟移动端
- **步骤**:
  1. 访问后台
  2. 点击菜单按钮
- **预期结果**: 
  - 侧边栏收起
  - 点击菜单显示侧边栏
  - 内容区域占满屏幕

### 10. API 测试 (API.test.tsx)

#### TC025: 获取房源列表
- **前置条件**: API 服务正常运行
- **步骤**:
  1. 调用 GET /v1/homestays
- **预期结果**: 
  - 返回 200
  - 返回房源数组

#### TC026: 获取分类列表
- **前置条件**: API 服务正常运行
- **步骤**:
  1. 调用 GET /v1/categories
- **预期结果**: 
  - 返回 200
  - 返回分类数组

#### TC027: 创建分类
- **前置条件**: API 服务正常运行
- **步骤**:
  1. 调用 POST /v1/categories
  2. 传入分类数据
- **预期结果**: 
  - 返回 200
  - 返回创建的分类

#### TC028: 更新订单状态
- **前置条件**: API 服务正常运行，存在订单
- **步骤**:
  1. 调用 PUT /v1/orders/:id/status
  2. 传入新状态
- **预期结果**: 
  - 返回 200
  - 订单状态更新

## 性能测试

### PT001: 页面加载时间
- **目标**: 首页首屏加载 < 3秒
- **测试方法**: Lighthouse 性能测试

### PT002: API 响应时间
- **目标**: API 响应 < 500ms
- **测试方法**: 使用 Chrome DevTools Network 面板

## 兼容性测试

### CT001: 浏览器兼容性
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### CT002: 移动端兼容性
- iOS Safari 14+
- Android Chrome 90+
